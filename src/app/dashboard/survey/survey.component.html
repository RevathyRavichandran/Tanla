<div style="background-color: white;">
    <h1 style="padding-left: 1%; padding-top: 1%; font-weight: bold;">
        Survey Creation
        <span style="right: 0; position: absolute; margin-right: 1rem">
      <button
        type="button"
        class="btn surveyCreate"
        (click)="createSurvey()"
        style="background: #2d69eb; color: white"
      >
        Create Survey&nbsp;
        <i class="fa fa-file fa-1x"></i>
      </button>
    </span>
    </h1>
    <mat-divider class="mt-3"></mat-divider>
</div>
<div class="row" style="padding: 1%">
    <div class="col-lg-12" *ngIf="noRecords">
        <mat-card>
            <div style="text-align: center">
                <img style="height: 300px; width: 300px" src="assets/no_files_records_256.png" alt="" />
            </div>
            <div style="text-align: center">
                <h1 style="color: #2d69eb">No Records Found</h1>
            </div>
        </mat-card>
    </div>
    <div class="col-lg-12" *ngIf="!noRecords">
        <div class="row" style="padding: 1%">
            <div class="col-lg-12">
                <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">


                    <ng-container matColumnDef="id">
                        <th class="sno" [attr.rowspan]="2" mat-header-cell *matHeaderCellDef>S/N</th>
                        <td mat-cell *matCellDef="let element">{{ element.id }}</td>
                    </ng-container>
                    <ng-container matColumnDef="surveyType">
                        <th mat-header-cell [attr.rowspan]="2" class="text-center" *matHeaderCellDef>Survey Type</th>
                        <td class="text-center" mat-cell *matCellDef="let element">
                            {{ element.surveyType }}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="surveyName">
                        <th mat-header-cell [attr.rowspan]="2" class="text-center" *matHeaderCellDef>Survey Name</th>
                        <td class="text-center" mat-cell *matCellDef="let element">
                            {{ element.surveyName }}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="catagoryName">
                        <th [attr.rowspan]="2" mat-header-cell class="text-center" *matHeaderCellDef>Category</th>
                        <td class="text-center" mat-cell *matCellDef="let element">
                            {{ element.catagoryName }}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="header-row-second-group">
                        <th mat-header-cell class="text-center" *matHeaderCellDef [attr.colspan]="2">Survey period</th>
                        
                      </ng-container>
                    <ng-container matColumnDef="surveyFromDate">
                        <th mat-header-cell class="text-center" *matHeaderCellDef>From</th>
                        <td mat-cell class="text-center" *matCellDef="let element">
                            {{ element.fromDate }}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="surveyToDate">
                        <th mat-header-cell class="text-center" *matHeaderCellDef>To</th>
                        <td mat-cell class="text-center" *matCellDef="let element">
                           {{ element.toDate }}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="status">
                        <th [attr.rowspan]="2" mat-header-cell class="text-center" *matHeaderCellDef>Status</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                            <span *ngIf="element.surveyStatus == '1'">Pending</span>
                            <span *ngIf="element.surveyStatus == '2'">Approved</span>
                            <span *ngIf="element.surveyStatus == '3'">Rejected</span>
                        </td>
                    </ng-container>
                    <ng-container class="liveCol" matColumnDef="live">
                        <th [attr.rowspan]="2" mat-header-cell *matHeaderCellDef style="text-align: center;">Live</th>
                        <td mat-cell *matCellDef="let element" style="text-align: center;">
                            <input *ngIf="element.surveyStatus == '2'" type="radio" (change)="liveCheck($event, element.surveyName, element.surveyName)" 
                                name="radio" [checked]="element.activeStatus === '1'" />
                                <input *ngIf="element.surveyStatus !== '2'" type="radio" (change)="liveCheck($event, element.surveyName, element.surveyName)" 
                                name="radio" disabled [checked]="element.activeStatus === '1'" />
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="download">
                        <th [attr.rowspan]="2" class="downloadCol" mat-header-cell *matHeaderCellDef>Respondent<br>Download</th>
                        <td mat-cell *matCellDef="let element">
                            <button mat-button>
                          <mat-icon
                            style="transform: scale(0.8); color: blue; cursor: pointer"
                            (click)="downloadSurvey(element.surveyName)"
                            >file_download</mat-icon
                          >
                        </button>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="downloadQues">
                        <th [attr.rowspan]="2" class="downloadCol" mat-header-cell *matHeaderCellDef>Questionnaire<br>Download</th>
                        <td mat-cell *matCellDef="let element">
                            <button mat-button>
                          <mat-icon
                            style="transform: scale(0.8); color: blue; cursor: pointer"
                            (click)="downloadQuestion(element.surveyName)"
                            >file_download</mat-icon
                          >
                        </button>
                        </td>
                    </ng-container>
                    
                      <tr mat-header-row *matHeaderRowDef="['id', 'surveyType', 'surveyName', 'catagoryName', 'header-row-second-group', 'status', 'live', 'download', 'downloadQues']"></tr>
                      <tr mat-header-row *matHeaderRowDef="['surveyFromDate', 'surveyToDate']"></tr>
                    <tr mat-row *matRowDef="let row; columns: ['id', 'surveyType', 'surveyName', 'catagoryName', 'surveyFromDate', 'surveyToDate', 'status', 'live', 'download', 'downloadQues']"></tr>
                </table>
            </div>
        </div>
    </div>
</div>
<ngb-pagination
      [collectionSize]="totalPages"
      [(page)]="currentPage"
      [maxSize]="2"
      [boundaryLinks]="true"
      [pageSize]="pageSize"
      (pageChange)="pageChanged(currentPage)"
      class="d-flex justify-content-center"
    ></ngb-pagination>